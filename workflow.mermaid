---
config:
  layout: elk
---
flowchart TB
 subgraph UI["ğŸŒ User Interface Layer"]
    direction TB
        Browser["ğŸ’» Modern Web Browser<br>Chrome | Safari | Firefox"]
        SPA["âœ¨ Single Page Application<br>ğŸ¨ Tailwind CSS + Vanilla JS<br>ğŸ“± Responsive Design"]
  end
 subgraph GCP["â˜ï¸ Google Cloud Platform - Docker Orchestration"]
    direction TB
        LoadBalancer["âš–ï¸ Load Balancer<br>NGINX Proxy"]
        API["ğŸš€ FastAPI Backend<br>ğŸ“Š RESTful API Endpoints<br>ğŸ”„ Async Processing"]
        VectorDB[("ğŸ§  ChromaDB<br>Vector Database<br>ğŸ“ˆ Similarity Search<br>ğŸ” Semantic Indexing")]
  end
 subgraph External["ğŸŒ External AI Services"]
    direction TB
        EmbedModel["ğŸ”¤ Sentence Transformers<br>all-MiniLM-L6-v2<br>ğŸ“Š Local Embeddings"]
        LLM["ğŸ¤– Google Gemini API<br>ğŸ§  Large Language Model<br>ğŸ’­ Answer Synthesis"]
  end
 subgraph Pipeline["ğŸ“Š Offline Data Processing Pipeline"]
    direction TB
        SEC["ğŸ›ï¸ SEC EDGAR Database<br>ğŸ“‹ 10-K Annual Reports<br>ğŸ¢ Public Companies"]
        Downloader["â¬‡ï¸ Document Fetcher<br>ğŸ”„ Automated Downloads<br>ğŸ“… Periodic Updates"]
        Parser["ğŸ“ Intelligent Parser<br>ğŸ” Text Extraction<br>ğŸ§¹ Data Cleaning"]
        Chunker["âœ‚ï¸ Semantic Chunker<br>ğŸ“ Optimal Chunk Sizing<br>ğŸ”— Context Preservation"]
        Embedder["ğŸ¯ Embedding Generator<br>ğŸ”¢ Vector Creation<br>ğŸ“Š Similarity Mapping"]
  end
 subgraph Monitor["ğŸ“ˆ Performance & Analytics"]
    direction LR
        Metrics["ğŸ“Š System Metrics<br>âš¡ Response Times<br>ğŸ¯ Accuracy Scores"]
        Logs["ğŸ“ Detailed Logging<br>ğŸ” Error Tracking<br>ğŸ“‹ Audit Trail"]
        Analytics["ğŸ“ˆ Usage Analytics<br>ğŸ‘¥ User Patterns<br>ğŸ“Š Query Insights"]
  end
    Browser --> SPA
    LoadBalancer --> API
    API <--> VectorDB
    SEC --> Downloader
    Downloader --> Parser
    Parser --> Chunker
    Chunker --> Embedder
    Embedder --> VectorDB
    UserQuery["ğŸ‘¤ User Input<br>â“ Financial Question"] -. ğŸ¯ Question Submitted .-> SPA
    SPA -- ğŸ“¤ HTTP POST /query<br>ğŸ”’ Secure API Call --> API
    API -- ğŸ” Query Vectorization<br>ğŸ“Š Semantic Search --> VectorDB
    VectorDB -- "ğŸ“‹ Top-K Relevant Chunks<br>ğŸ¯ Similarity Scores" --> API
    API -- ğŸ“ Contextual Prompt<br>ğŸ¨ Template Engineering --> LLM
    LLM -- ğŸ’¡ Synthesized Answer<br>ğŸ“š Source Attribution --> API
    API -- "ğŸ“¡ Streamed Response<br>âš¡ Real-time Updates" --> SPA
    UserFeedback["ğŸ‘ğŸ‘ User Feedback<br>â­ Quality Rating"] -. ğŸ“Š Analytics Data .-> SPA
    SPA -- ğŸ“ˆ Feedback Metrics<br>ğŸ”„ Continuous Learning --> API
    API -. ğŸ“Š Telemetry .-> Monitor
     Browser:::frontend
     SPA:::frontend
     LoadBalancer:::backend
     API:::backend
     VectorDB:::database
     EmbedModel:::external
     LLM:::external
     SEC:::pipeline
     Downloader:::pipeline
     Parser:::pipeline
     Chunker:::pipeline
     Embedder:::pipeline
     UserQuery:::userAction
     UserFeedback:::userAction
     Monitor:::flow
    classDef frontend fill:#E3F2FD,stroke:#1976D2,stroke-width:3px,color:#000,font-weight:bold
    classDef backend fill:#F3E5F5,stroke:#7B1FA2,stroke-width:3px,color:#000,font-weight:bold
    classDef database fill:#E8F5E8,stroke:#388E3C,stroke-width:3px,color:#000,font-weight:bold
    classDef external fill:#FFF3E0,stroke:#F57C00,stroke-width:3px,color:#000,font-weight:bold
    classDef pipeline fill:#FFEBEE,stroke:#D32F2F,stroke-width:3px,color:#000,font-weight:bold
    classDef flow fill:#transparent,stroke:#455A64,stroke-width:2px,stroke-dasharray: 5 5
    classDef userAction fill:#F1F8E9,stroke:#689F38,stroke-width:2px,color:#000
    style Monitor fill:#f0f9ff,stroke:#0369a1,stroke-width:3px,rx:15,ry:15
    style UI fill:#f8fafc,stroke:#475569,stroke-width:3px,rx:15,ry:15
    style GCP fill:#f1f5f9,stroke:#334155,stroke-width:3px,rx:15,ry:15
    style External fill:#fefce8,stroke:#a16207,stroke-width:3px,rx:15,ry:15
    style Pipeline fill:#fef2f2,stroke:#b91c1c,stroke-width:3px,rx:15,ry:15
